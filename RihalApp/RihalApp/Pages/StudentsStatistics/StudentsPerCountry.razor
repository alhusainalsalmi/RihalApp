@page "/StudentStats/percountry"
@using RihalApp.Services.GetStudentsPerCountryUseCaseService
@using RihalApp.Notifier
@inject IGetStudentsPerCountryUseCaseService _getStudentsPerCountryUseCaseService 
@inject AppNotifier _appNotifier

  <RadzenChart >
                    <RadzenPieSeries Data="@Data" Title="Students Per Country" CategoryProperty="CountryName" ValueProperty="NumberOfStudents">
                        <RadzenSeriesDataLabels Visible="true" />
                    </RadzenPieSeries>
   </RadzenChart>



@code {



     private CancellationTokenSource source = new CancellationTokenSource();
    private List<StudentsPerCountryOutputDto>? Data;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            Data =  await _getStudentsPerCountryUseCaseService.GetStudentsPerCountryAsync(source.Token);

        }
        catch
        {
            _appNotifier.NotifyError();
        }

    }


     class DataItem
    {
        public string Quarter { get; set; }
        public double Revenue { get; set; }
    }

    DataItem[] revenue = new DataItem[]
    {
      new DataItem { Quarter = "Q1", Revenue = 25 },
      new DataItem { Quarter = "Q2", Revenue = 28 },
      new DataItem { Quarter = "Q3", Revenue = 22 }
    };
}
